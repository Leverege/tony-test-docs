
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../../stable/images/architectFavicon.png">
      <meta name="generator" content="mkdocs-1.3.0, mkdocs-material-8.2.8">
    
    
      
        <title>Message Queue - Leverege Architect</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.644de097.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.e6a45f82.min.css">
        
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../stable/stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#quick-usage" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-component="outdated" hidden>
        <aside class="md-banner md-banner--warning">
          
        </aside>
      </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Leverege Architect" class="md-header__button md-logo" aria-label="Leverege Architect" data-md-component="logo">
      
  <img src="../../stable/images/architectCircle.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Leverege Architect
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Message Queue
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08z"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href="../.." class="md-tabs__link">
      Home
    </a>
  </li>

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../stable/platform-overview/overview/" class="md-tabs__link">
        Platform Overview
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../stable/api/api/" class="md-tabs__link">
        API
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../services/api-server/" class="md-tabs__link">
        Services
      </a>
    </li>
  

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../log/" class="md-tabs__link md-tabs__link--active">
        Server Libraries
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../utilities/exit/" class="md-tabs__link">
        Utilities
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../ingestion/mqtt-ingestor/" class="md-tabs__link">
        Ingestion
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../ui/api-redux/" class="md-tabs__link">
        UI
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Leverege Architect" class="md-nav__button md-logo" aria-label="Leverege Architect" data-md-component="logo">
      
  <img src="../../stable/images/architectCircle.svg" alt="logo">

    </a>
    Leverege Architect
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2">
          Platform Overview
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Platform Overview" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Platform Overview
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../stable/platform-overview/overview/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../stable/platform-overview/architecture/" class="md-nav__link">
        Architecture
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../stable/platform-overview/concepts/" class="md-nav__link">
        Core Concepts
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../stable/platform-overview/deployment/" class="md-nav__link">
        Platform Setup
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../stable/platform-overview/getting-started/" class="md-nav__link">
        Building a Project
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../platform-overview/api-ui/" class="md-nav__link">
        API UI
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_3">
          API
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="API" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          API
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../stable/api/api/" class="md-nav__link">
        API
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../stable/api/interface/" class="md-nav__link">
        Interface
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../stable/api/project/" class="md-nav__link">
        Project
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../stable/api/system/" class="md-nav__link">
        System
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../stable/api/device/" class="md-nav__link">
        Device
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../stable/api/blueprint/" class="md-nav__link">
        Blueprint
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../stable/api/collection/" class="md-nav__link">
        Collection
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../stable/api/child/" class="md-nav__link">
        Child
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../stable/api/history/" class="md-nav__link">
        History
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../stable/api/scenario/" class="md-nav__link">
        Scenario
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../stable/api/script/" class="md-nav__link">
        Script
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../stable/api/template/" class="md-nav__link">
        Template
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../stable/api/timer/" class="md-nav__link">
        Timer
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../stable/api/user/" class="md-nav__link">
        User
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../stable/api/users/" class="md-nav__link">
        Users
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_4">
          Services
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Services" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Services
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../services/api-server/" class="md-nav__link">
        API Server
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authz-server/" class="md-nav__link">
        Authz Server
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../services/message-processor/" class="md-nav__link">
        Message Processor
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../services/transponder/" class="md-nav__link">
        Transponder
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../services/reason/" class="md-nav__link">
        Reason
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../services/scheduler/" class="md-nav__link">
        Scheduler
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../services/messenger/" class="md-nav__link">
        Messenger
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../services/emailer/" class="md-nav__link">
        Emailer
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../services/db-curator/" class="md-nav__link">
        DB-Curator
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../services/geotile-server/" class="md-nav__link">
        Geotile Server
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" checked>
      
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_5">
          Server Libraries
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Server Libraries" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Server Libraries
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../log/" class="md-nav__link">
        Log
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../messages/" class="md-nav__link">
        Messages
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Message Queue
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Message Queue
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#quick-usage" class="md-nav__link">
    Quick Usage
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#note-about-config" class="md-nav__link">
    Note about Config
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#writer-creation" class="md-nav__link">
    Writer Creation
  </a>
  
    <nav class="md-nav" aria-label="Writer Creation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nsq" class="md-nav__link">
    NSQ
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pubsub-google" class="md-nav__link">
    Pub/Sub (Google)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#writer-usage" class="md-nav__link">
    Writer Usage
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reader-creation" class="md-nav__link">
    Reader Creation
  </a>
  
    <nav class="md-nav" aria-label="Reader Creation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nsq_1" class="md-nav__link">
    NSQ
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pubsub-google_1" class="md-nav__link">
    Pub/Sub (Google)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reader-usage" class="md-nav__link">
    Reader Usage
  </a>
  
    <nav class="md-nav" aria-label="Reader Usage">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#message" class="md-nav__link">
    Message
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#routes" class="md-nav__link">
    Routes
  </a>
  
    <nav class="md-nav" aria-label="Routes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sending-in-series" class="md-nav__link">
    Sending in Series
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sending-in-parallel" class="md-nav__link">
    Sending in Parallel
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-terminate-flag" class="md-nav__link">
    The Terminate Flag
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../cache/" class="md-nav__link">
        Cache
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../lock/" class="md-nav__link">
        Lock
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../limit/" class="md-nav__link">
        Limit
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../cluster-manager/" class="md-nav__link">
        Cluster Manager
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../error/" class="md-nav__link">
        Error
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../exit/" class="md-nav__link">
        Exit
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_6">
          Utilities
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Utilities" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Utilities
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../utilities/exit/" class="md-nav__link">
        Promise
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../utilities/data-store/" class="md-nav__link">
        Data Store
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../utilities/comms/" class="md-nav__link">
        Comms
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../utilities/factory/" class="md-nav__link">
        Factory
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../utilities/path/" class="md-nav__link">
        Path
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../utilities/reasoner/" class="md-nav__link">
        Reasoner
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../utilities/object-util/" class="md-nav__link">
        Object Util
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../utilities/array-util/" class="md-nav__link">
        Array Util
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../utilities/string-util/" class="md-nav__link">
        String Util
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../utilities/base62-util/" class="md-nav__link">
        Base62 Util
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../utilities/value-cache/" class="md-nav__link">
        Value Cache
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../utilities/validator/" class="md-nav__link">
        Validator
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../utilities/lol/" class="md-nav__link">
        Lol
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7" type="checkbox" id="__nav_7" >
      
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_7">
          Ingestion
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Ingestion" data-md-level="1">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          Ingestion
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../ingestion/mqtt-ingestor/" class="md-nav__link">
        MQTT
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_8" type="checkbox" id="__nav_8" >
      
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_8">
          UI
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="UI" data-md-level="1">
        <label class="md-nav__title" for="__nav_8">
          <span class="md-nav__icon md-icon"></span>
          UI
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../ui/api-redux/" class="md-nav__link">
        API Redux
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../ui/ui-elements/" class="md-nav__link">
        UI Elements
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../ui/ui-attributes-graphs/" class="md-nav__link">
        UI Graph Attributes
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../ui/ui-redux/" class="md-nav__link">
        UI Redux
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../ui/ui-mapbox-elements/" class="md-nav__link">
        UI Mapbox Elements
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../ui/ui-active-theme/" class="md-nav__link">
        UI Active Theme
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../ui/ui-color-elements/" class="md-nav__link">
        UI Color Elements
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../ui/ui-linear-view-elements/" class="md-nav__link">
        UI Linear View Elements
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#quick-usage" class="md-nav__link">
    Quick Usage
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#note-about-config" class="md-nav__link">
    Note about Config
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#writer-creation" class="md-nav__link">
    Writer Creation
  </a>
  
    <nav class="md-nav" aria-label="Writer Creation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nsq" class="md-nav__link">
    NSQ
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pubsub-google" class="md-nav__link">
    Pub/Sub (Google)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#writer-usage" class="md-nav__link">
    Writer Usage
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reader-creation" class="md-nav__link">
    Reader Creation
  </a>
  
    <nav class="md-nav" aria-label="Reader Creation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nsq_1" class="md-nav__link">
    NSQ
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pubsub-google_1" class="md-nav__link">
    Pub/Sub (Google)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reader-usage" class="md-nav__link">
    Reader Usage
  </a>
  
    <nav class="md-nav" aria-label="Reader Usage">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#message" class="md-nav__link">
    Message
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#routes" class="md-nav__link">
    Routes
  </a>
  
    <nav class="md-nav" aria-label="Routes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sending-in-series" class="md-nav__link">
    Sending in Series
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sending-in-parallel" class="md-nav__link">
    Sending in Parallel
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-terminate-flag" class="md-nav__link">
    The Terminate Flag
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                


<p>This library creates interfaces for sending and receiving messages on a queuing system. </p>
<h2 id="quick-usage">Quick Usage<a class="headerlink" href="#quick-usage" title="Permanent link">&para;</a></h2>
<p>BREAKING CHANGE: As of version 4.0.0, this lib has been updated to an ESM Module. The <code>createReader()</code> and <code>createWriter()</code> methods are now asynchronous. They will also automatically invoke <code>start()</code> unless the last argument is false. </p>
<div class="highlight"><pre><span></span><code>  import MsgQueue from &#39;message-queue&#39;
  const { MessageProcessor } = MsgQueue;


  const { transportConfig, topic, channel } = options;

  // Create a writer
  const writer = await MsgQueue.createWriter( { transportConfig } );
  await writer.start();

  // Create the process message function. It should return a promise
  const processMessage = function( message, messageOptions ) {
    return new Promise( ( resolve, reject ) =&gt; {
      // process message 
    })
  }

  // Give the process function to a MessageProcessor that handles autoAck and routing
  const processor = new MessageProcessor( { writer, processor : processMessage } )
  const reader = await MsgQueue.createReader( { transportConfig, topic, channel, processor } );
  await reader.start()
</code></pre></div>
<p>Optionally, you can derive from MessageProcessor:</p>
<p><div class="highlight"><pre><span></span><code>  const { MessageProcessor } = require( &#39;message-queue&#39; )

  class MyProcessor extends MessageProcessor {
    process( message, messageOptions ) {
      return new Promise( ( resolve, reject ) =&gt; { /* process */ })
    }
  }
</code></pre></div>
and create one of those to give to the reader:</p>
<div class="highlight"><pre><span></span><code>  const processor = new MyProcessor( { ...myOptions, writer } );
  const reader = MsgQueue.createReader( { transportConfig, topic, channel, processor } );
  await reader.start()
</code></pre></div>
<h2 id="note-about-config">Note about Config<a class="headerlink" href="#note-about-config" title="Permanent link">&para;</a></h2>
<p>The <code>createReader</code> and <code>createWriter</code> methods allow the transport options to be
passed in to the methods as the option <code>transportConfig</code>. The value of this can
be a JSON string, the path to a file that will be read via <code>require</code>, or an object
with the options. This allows for easier configuration via environment variables:</p>
<div class="highlight"><pre><span></span><code>MsgQueue.createReader( {
  transportConfig : process.env.TRANSPORT_CONFIG || { 
    type : &#39;nsq&#39;, 
    host : process.env.NSQ_HOST_ADDR || &#39;127.0.0.1&#39;,
    port : process.env.NSQ_HOST_PORT || 4150
  },
  topic : &#39;myTopic&#39;, 
  channel : &#39;defaultChannel&#39;,
  processor : p
} )
</code></pre></div>
<p>The above will create a reader listening to the <code>myTopic</code> topic on the <code>defaultChannel</code>, and will process messages with processor <code>p</code>. If <code>process.env.TRANSPORT_CONFIG</code> is not defined, a default NSQ reader will be used as the transport.</p>
<h2 id="writer-creation">Writer Creation<a class="headerlink" href="#writer-creation" title="Permanent link">&para;</a></h2>
<p>Create a writer by using the <code>MsqQueue.createWriter( options )</code> method. The
options will define the type of writer that is created and its options.</p>
<h3 id="nsq">NSQ<a class="headerlink" href="#nsq" title="Permanent link">&para;</a></h3>
<p>To create an NSQ writer, use these options</p>
<div class="highlight"><pre><span></span><code>  let options = {
    type : &#39;nsq&#39;,    // Kind of writer
    name : &lt;string&gt;, // used for logging. Defaults to &#39;NsqWriter&#39;
    host : &lt;string&gt;, // the host name of the nsq server. eg: &#39;127.0.0.1&#39;,
    port : &lt;string|number&gt;, // the port of the server to talk on. eg: 4150
  }
</code></pre></div>
<h3 id="pubsub-google">Pub/Sub (Google)<a class="headerlink" href="#pubsub-google" title="Permanent link">&para;</a></h3>
<p>To create an Google Pub/Sub writer, use these options</p>
<p><div class="highlight"><pre><span></span><code>  let options = {
    type : &#39;pubsub&#39;,    // Kind of writer
    name : &lt;string&gt;, // used for logging. Defaults to &#39;PubSubWriter&#39;
    projectId : &lt;string&gt;, // The google projectId,
    keyFilename : &lt;string&gt;, // The location of the service account JSON file.
    publisher : { 
      batching : { 
        // The number of bytes to cache before sending the message. Default Math.pow(1024, 2) * 5,
        maxBytes: &lt;number&gt;, 
        // The number of messages to cache before they are sent. Defaults to 1000
        maxMessages: &lt;number&gt;, 
        // The max milliseconds to cache before sending. Default to 1000
        maxMilliseconds: &lt;number&gt;
      }
    }
  }
</code></pre></div>
Note, by default the Pub/Sub publisher will delay a second before sending, so setting
<code>batching.maxMilliseconds</code> to something small(0) will cause it to send messages faster.</p>
<h2 id="writer-usage">Writer Usage<a class="headerlink" href="#writer-usage" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code>  const writer = MsqQueue.createWriter( options )
  writer.start( )
    .then( onReady ) 
    .catch ( onErr )
</code></pre></div>
<p>Once you have the writer, there are two different publish methods <code>publish</code> or <code>route</code>. Both can take an option <code>callback( err )</code> method, and if it is not supplied, a promise will be returned instead. </p>
<p><code>publish( topicName, message, callback )</code> is the lowest level method and is used by <code>route()</code>. It will put the message onto the specified topic for consumption. The message should be a JSON object.</p>
<p>The <code>route( routes, message, callback )</code> method will send the message on the specified routing path. The routes object can be an array, object, or string that determines how to send the message. In the case of an array, the message will be sent to the next topic handler and it is up to that handler to continue the route supplied. In the case of an object (see Route for format), the message will be published to many topics at once. Each of those handlers must follow any specified continuation route. If the routes is a string, it behaves like publish(). Along with routing, an options object can be sent with the message to allow it processed in dynamic ways (like specify a script, or thresholds)</p>
<h2 id="reader-creation">Reader Creation<a class="headerlink" href="#reader-creation" title="Permanent link">&para;</a></h2>
<p>Create a reader by using the <code>MsqQueue.createReader( options )</code> method. The options will define the type of reader that is created and its options.</p>
<h3 id="nsq_1">NSQ<a class="headerlink" href="#nsq_1" title="Permanent link">&para;</a></h3>
<p>To create an NSQ reader, use these options:
<div class="highlight"><pre><span></span><code>  let options = {
    type : &#39;nsq&#39;,    // Kind of writer
    name : &lt;string&gt;, // used for logging. Defaults to &#39;NsqReader( topic / channel )&#39;
    host : &lt;string&gt;, // the host name of the nsq server. eg: &#39;127.0.0.1&#39;,
    port : &lt;string|number&gt;, // the port of the server to talk on. eg: 4150
    topic : &lt;string&gt;, // The name of the topic to listen to. Required.
    channel : &lt;string&gt; // The channel name/group to use, defaults &lt;topic&gt;-default-processor
    processor : &lt;MessageProcessor, function, or object with onMessage&gt; // Required
  }
</code></pre></div></p>
<h3 id="pubsub-google_1">Pub/Sub (Google)<a class="headerlink" href="#pubsub-google_1" title="Permanent link">&para;</a></h3>
<p>To create an Google Pub/Sub reader, use these options:
<div class="highlight"><pre><span></span><code>  let options = {
    type : &#39;pubsub&#39;,    // Kind of writer
    name : &lt;string&gt;, // used for logging. Defaults to &#39;PubSubWriter&#39;
    projectId : &lt;string&gt;, // The googel projectId. Required
    keyFilename : &lt;string&gt;, // The location of the service account json file. Required
    topic : &lt;string&gt;, // The name of the topic to listen to. Required
    subscription : &lt;string&gt; // The name of the subscription to use, defaults to &lt;topic&gt;-default-processor
    processor : &lt;MessageProcessor, function, or object with onMessage&gt; // Required
  }
</code></pre></div></p>
<p>As a note, Pub/Sub rejects attempts to send to any topic that does not exist. By default, The PubSubReader will create the topic and the subscription attached to it. Subscription names are global to the project, so using the topic name in the subscription name is suggested.</p>
<h2 id="reader-usage">Reader Usage<a class="headerlink" href="#reader-usage" title="Permanent link">&para;</a></h2>
<p>When creating a reader, the options object requires a processor field. This can be either a <code>function( Message )</code> or an object (preferably an instance of <code>MessageProcessor</code>) that has an <code>onMessage( Message )</code> method. Both of these should process the message and return a Promise.</p>
<div class="highlight"><pre><span></span><code>  const reader = MsqQueue.createReader( options )
  reader.start( )
    .then( onReady ) 
    .catch ( onErr )
</code></pre></div>
<p>When reader receives a message from its source, it is wrapped in an implementation of Message
and given to the processor to process.</p>
<h3 id="message">Message<a class="headerlink" href="#message" title="Permanent link">&para;</a></h3>
<p>The Message object attempts to adapt messages from different queue types into a standard interface.
The Message object will also handle breaking out of any routing information that has been passed along.
To get the actual message to process, use <code>Message.getMessage()</code>. In some cases, <code>Message.json()</code> will equal <code>Message.getMessage()</code>, but if the message contains routing information, <code>Message.getMessage()</code> will actually return the message to route.</p>
<p>Messages must be accepted ( <code>Message.ack()</code> ) or rejected ( <code>Message.noAck()</code> ). Be default, the MessageProcessor can be setup to call <code>ack()</code> before processing ( <code>options.autoAck : 'onReceipt'</code> ), after processing ( <code>options.autoAck : 'afterProcess'</code> ), or never ( <code>options.autoAck : 'none'</code> ). If the never option is chosen, the process call must make sure to either call <code>ack()</code> or <code>noAck()</code> before completing or the message may be redelivered. If autoAck is <code>'afterProcess'</code>, the <code>options.ackOnError</code> determines if <code>ack()</code> or <code>noAck()</code> will be called on the message.</p>
<h1 id="routes">Routes<a class="headerlink" href="#routes" title="Permanent link">&para;</a></h1>
<p>As mentioned, a Message can be published along a route by calling the publish() method on the Writer. A route consists of a collection of topics to send to and how to continue sending data along a chain. It is up to the Reader/Processor to continue a route if indicated and not cancelled by processor itself. The message sent to the next topic can be modified or replaced depending on the processor.</p>
<p>Route definition has a long form and some shortcuts.</p>
<p>To publish a message to one topic, the route would look like:</p>
<div class="highlight"><pre><span></span><code>const route = {
  topic : &#39;myTopic&#39;,
  options : null,
  route : null,
  terminate : false
}
writer.publish( route, msg )
</code></pre></div>
<p>The options, routes and terminate fields default to null, null, and false and can be left out.</p>
<div class="highlight"><pre><span></span><code>const route = {
  topic : &#39;myTopic&#39;
}
writer.publish( route, msg )
</code></pre></div>
<p>The route, since all it indicates is a topic, can be written as a string for a shortcut:</p>
<div class="highlight"><pre><span></span><code>const route = &#39;myTopic&#39;
writer.publish( route, msg )
</code></pre></div>
<p>This is effectively the same call as <code>publish( 'myTopic', msg )</code>.</p>
<p>So a single route target can either be a topic name (ie, the string) or an object containing a topic, options, routes, and a terminate flag.</p>
<h2 id="sending-in-series">Sending in Series<a class="headerlink" href="#sending-in-series" title="Permanent link">&para;</a></h2>
<p>To send a message to another topic after it is finished being processed by a first, the route object of the topic can be populated with the follow on route. </p>
<div class="highlight"><pre><span></span><code>const route = {
  topic : &#39;myTopic&#39;
  route : {
    topic : &#39;myNextTopic&#39;
  }
}
writer.publish( route, msg )
</code></pre></div>
<p>This will send msg to myTopic, and then the processor of 'myTopic' will send the results to the 'myNextTopic' topic. If after 'myNextTopic' is completed, you wanted to go to another location, that topic object could also have a route object. This can continue deeper and deepr.</p>
<div class="highlight"><pre><span></span><code>const route = {
  topic : &#39;myTopic&#39;
  route : {
    topic : &#39;myNextTopic&#39;,
    route : {
      topic : &#39;myNextNextTopic&#39;,
      route : {
        topic : &#39;myNextNextNextTopic&#39;
      }
    }
  }
}
writer.publish( route, msg )
</code></pre></div>
<p>Because that can be a little difficult to follow, the array object can be used as a shortcut:</p>
<div class="highlight"><pre><span></span><code>const route = [
  { topic : &#39;myTopic&#39; },
  { topic : &#39;myNextTopic&#39; },
  { topic : &#39;myNextNextTopic&#39; },
  { topic : &#39;myNextNextNextTopic&#39; }
]
writer.publish( route, msg )
</code></pre></div>
<p>or, since the above example has no other values except topic names:</p>
<div class="highlight"><pre><span></span><code>const route = [ &#39;myTopic&#39;, &#39;myNextTopic&#39;, &#39;myNextNextTopic&#39;, &#39;myNextNextNextTopic&#39; ]
writer.publish( route, msg )
</code></pre></div>
<h1 id="sending-in-parallel">Sending in Parallel<a class="headerlink" href="#sending-in-parallel" title="Permanent link">&para;</a></h1>
<p>Sometimes you want to route messages to mulitple places at once. To do this, you can use the concurrent route object.</p>
<div class="highlight"><pre><span></span><code>const route = {
  type : &#39;concurrent&#39;,
  routes : [
    { topic : &#39;A&#39; },
    { topic : &#39;B&#39; }
  ]
}
writer.publish( route, msg )
</code></pre></div>
<p>In this case, msg will be sent to topic A and topic B at the same time. A shortened version of this can use the object notation without the 'type' equaling 'concurrent':</p>
<div class="highlight"><pre><span></span><code>const route = {
  A : true,
  B : true
}
writer.publish( route, msg )
</code></pre></div>
<p>Each of those topics (A, B) could be directed to send to more routes after they process, or have options. For example:</p>
<div class="highlight"><pre><span></span><code>const route = {
  type : &#39;concurrent&#39;,
  routes : [
    { topic : &#39;A&#39;, route : [ &#39;A0&#39;, &#39;A1&#39; ] },
    { topic : &#39;B&#39;, route : [ &#39;B0&#39; ] }
  ]
}
writer.publish( route, msg )
</code></pre></div>
<p>The above would result in two concurrent paths for the msg: A -&gt; A0 -&gt; A1 and B -&gt; B0. In the above example the route arrays are represented as shortcuts, but could have use the expanded form.</p>
<p>The concurrent object has a shortened version as well. As a note, if you wish to send to the same topic but with different options, this form CANNOT be used and the above 'concurrent' form must be used. The above can be shortend to:</p>
<div class="highlight"><pre><span></span><code>const route = {
  A : [ &#39;A0&#39;, &#39;A1&#39; ],
  B : [ &#39;B0&#39; ] 
}
writer.publish( route, msg )
</code></pre></div>
<p>If B0 required options, it could be expanded. Note, in the shortened concurrent for, the topic that would normal be specified by the 'topic' field in the object is overridden by the concurrent shortcut's key. Because of this, if you need to send mulitple times to the same topic but with different options (ie Reason Scripts), the concurrent shortcut cannot be used.</p>
<div class="highlight"><pre><span></span><code>const route = {
  A : [ &#39;A0&#39;, &#39;A1&#39; ],
  B : { type : &#39;B0&#39;, options : { v : 12 } }
}
writer.publish( route, msg )
</code></pre></div>
<h1 id="the-terminate-flag">The Terminate Flag<a class="headerlink" href="#the-terminate-flag" title="Permanent link">&para;</a></h1>
<p>In the case of concurrency, we run into a potential problem. Consider this:</p>
<div class="highlight"><pre><span></span><code>const route = [
  { type : &#39;concurrent&#39;,
    routes : [
      { topic : &#39;A&#39;, route : [ &#39;A0&#39;, &#39;A1&#39; ] },
      { topic : &#39;B&#39;, route : [ &#39;B0&#39; ] }
      { topic : &#39;C&#39;, 
        route : {
          type : &#39;concurrent&#39;,
          routes : [ &#39;C0&#39;, &#39;C1&#39; ]
        }
      }
    ] 
  },
  &#39;D&#39;
]
writer.publish( route, msg )
</code></pre></div>
<p>As is, this would result in several paths for the message:
<div class="highlight"><pre><span></span><code>A -&gt; A0 -&gt; A1 -&gt; D
B -&gt; B0 -&gt; D
C -&gt; C0 -&gt; D
C -&gt; C1 -&gt; D
</code></pre></div></p>
<p>What if we didn't want C0 and C1 to continue to D? This is where the terminate flag comes in. Setting terminate to true in the 'C' block would cancel the forwarding to D.</p>
<div class="highlight"><pre><span></span><code>const route = [
  { type : &#39;concurrent&#39;,
    routes : [
      { topic : &#39;A&#39;, route : [ &#39;A0&#39;, &#39;A1&#39; ] },
      { topic : &#39;B&#39;, route : [ &#39;B0&#39; ] }
      { topic : &#39;C&#39;, 
        route : {
          type : &#39;concurrent&#39;,
          routes : [ &#39;C0&#39;, &#39;C1&#39; ]
        },
        terminate : true
      }
    ] 
  },
  &#39;D&#39;
]
writer.publish( route, msg )
</code></pre></div>
<p>The above would result in the following paths for the message:
<div class="highlight"><pre><span></span><code>A -&gt; A0 -&gt; A1 -&gt; D
B -&gt; B0 -&gt; D
C -&gt; C0
C -&gt; C1
</code></pre></div></p>

              
            </article>
          </div>
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" data-md-state="hidden">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"/></svg>
            Back to top
          </a>
        
      </main>
      
        <footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../messages/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Messages" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Messages
            </div>
          </div>
        </a>
      
      
        
        <a href="../cache/" class="md-footer__link md-footer__link--next" aria-label="Next: Cache" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Cache
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; Leverege LLC 2022 | All Rights Reserved | IoT Changes Everything&trade;
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    <a href="https://www.linkedin.com/feed/update/urn:li:activity:6589859965832347648/" target="_blank" rel="noopener" title="Leverege on LinkedIn" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg>
    </a>
  
    
    
    <a href="https://www.facebook.com/leverege/" target="_blank" rel="noopener" title="Leverege on Facebook" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"/></svg>
    </a>
  
    
    
    <a href="https://twitter.com/leverege?ref_src=twsrc%5Egoogle%7Ctwcamp%5Eserp%7Ctwgr%5Eauthor" target="_blank" rel="noopener" title="Leverege on Twitter" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs", "navigation.top", "NOnavigation.sections", "navigation.indexes", "search.highlight", "search.share", "search.suggest"], "search": "../../assets/javascripts/workers/search.5e67fbfe.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.c44cc438.min.js"></script>
      
        <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
      
    
  </body>
</html>